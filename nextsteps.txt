Fechar o onboarding crítico do Supabase

1. Sign up your first user (validar fluxo NextAuth + criação em auth.users).
2. Add server-side logic (endpoint de ingestão admin já existe em /api/admin/ingest).
3. Monitor project health (agora com logs estruturados por worker + stats agregadas).
4. Connect to GitHub (deploy/cron com rastreabilidade).
5. Upload a file só se fores usar Storage agora.

Sprint 1 (fundação do produto)

1. UserSavedProgram (API + UI de favoritos).
2. ingestion_runs persistentes em DB (ainda pendente).
3. Estratégia de dedup fechada (atual: update-in-place por sourceUrl/contentHash).

Sprint 2 (ingestão nacional máxima - atualizado)

Objetivo: cobertura prática máxima para apoios em Portugal.

Workers nacionais canónicos:
1. Fundo Ambiental.
2. Recuperar Portugal (PRR).
3. Portugal 2030 (Avisos + Plano Anual).
4. Balcão dos Fundos.
5. Portal da Habitação / IHRU.
6. DGEG (apoios energia).
7. ADENE / casA+.
8. Diário da República (backstop legal).

Cobertura municipal:
1. Índice oficial DGAL (Portal Autárquico) para discovery de municípios.
2. Varredura das secções típicas municipais:
   /habitacao, /reabilitacao-urbana, /acao-social, /ambiente, /energia, /urbanismo, /regulamentos, /avisos, /editais, /candidaturas.
3. Backstop no Diário da República para não perder regulamentos/editais.

Critérios técnicos Sprint 2:
1. Retry + backoff + rate limit.
2. Métricas: found/new/updated/skipped/errors.
3. Deduplicação por sourceUrl + contentHash.

Sprint 3 (staging e automação)

1. Staging Vercel + Supabase separado.
2. Cron (Vercel ou GitHub Actions) a correr ingestão.
3. E2E mínimo: login, listar apoios, detalhe, guardar favorito, ver favoritos.

Depois

1. Notificações (queue + preferências).
2. Dashboard admin.
3. Hardening: monitorização de falhas por source, alertas e budgets de scraping.
