# Portal Casa Eficiente - template de variáveis de ambiente
# Copiar para .env.local em desenvolvimento.
# Em staging/produção no Vercel, configurar estas variáveis no dashboard.

# ============================================================================
# Core (obrigatórias em todos os ambientes)
# ============================================================================

# URL de runtime (recomendado: Supabase pooler / pgbouncer)
DATABASE_URL="postgresql://user:pass@host:6543/postgres?pgbouncer=true&connection_limit=1&sslmode=require"

# URL direta para migrações/maintenance (sem pgbouncer)
DIRECT_URL="postgresql://user:pass@host:5432/postgres?sslmode=require"

# NextAuth/Auth.js secret
# Gerar com: openssl rand -base64 32
AUTH_SECRET="replace_with_secure_random_secret"
# Legacy alias aceite: NEXTAUTH_SECRET

# URL pública da app
# Dev: http://localhost:3000
# Staging: https://<staging-domain>.vercel.app
# Prod: https://<your-domain>
NEXTAUTH_URL="http://localhost:3000"

# Segredo do endpoint /api/cron/ingest (Authorization: Bearer <CRON_SECRET>)
CRON_SECRET="replace_with_long_random_token"

# ============================================================================
# Password reset / email (opcionais em dev, recomendadas em staging/prod)
# ============================================================================
RESEND_API_KEY=""
EMAIL_FROM="Portal Casa Eficiente <no-reply@example.com>"
PASSWORD_RESET_TOKEN_TTL_MINUTES="60"

# ============================================================================
# Ingestão (opcionais - defaults já definidos em código)
# ============================================================================
FUNDO_AMBIENTAL_URL="https://www.fundoambiental.pt/avisos"
MUNICIPAL_DISCOVERY_LIMIT="308"
MUNICIPAL_REQUEST_DELAY_MS="500"
MUNICIPAL_SCAN_PATH_LIMIT="10"
MUNICIPAL_WEBSITES_DATASET_URL="https://dados.gov.pt/pt/datasets/r/03c535e3-3c1b-47b7-8d6f-7abc9f5ef75a"
MUNICIPAL_WEBSITES_RESOURCE_URLS=""
MUNICIPAL_WEBSITES_UDATA_DATASET_URL="https://dados.gov.pt/api/1/datasets/municipios-portugueses-websites-e-historico-de-versoes-no-arquivo-pt/"
DRE_DEBUG_API="0"

# ============================================================================
# Postal / geocoding (opcionais)
# ============================================================================
POSTAL_CACHE_TTL_DAYS="30"
POSTAL_VALIDATION_TIMEOUT_MS="4500"

# ============================================================================
# Runtime
# ============================================================================
NODE_ENV="development"
